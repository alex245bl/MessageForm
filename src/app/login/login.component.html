
<div class="container">
  <div class="bar">Напишите нам</div>
  <div class="barshadow"></div>
    <form #form="ngForm" (ngSubmit)="onSumbit()">
      <div class="field">
        <div class="text-field"><label for="">Ваше Имя:</label></div>
        <input type="text" name="mailName" [(ngModel)]="fname" required  class="input-field icon-name"></div>
      <div class="field">
        <div class="text-field"><label for="">Ваш Email:</label></div>
        <input type="email" required  [(ngModel)]="femail" class="input-field icon-mail" name="mailEmail" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"></div>
      <div class="field">
        <div class="text-field"><label for="">Ваш Телефон:</label></div>
        <input type="text" [(ngModel)]="fphone" required class="input-field icon-phone" [textMask]="{mask: phoneMask}" name="mailPhone" ></div>
      <div class="field">
        <div class="text-field"><label for="">Тема:</label></div>
        <select type="text" name="mailTopic" [(ngModel)]="newLetter.topic" class="input-field icon-topic">
          <option *ngFor="let topic of topics" value="{{topic.id}}" >
            {{topic.topic}}
          </option>
        </select>
      </div>
      <div class="field">
        <div class="text-field"><label for="">Ваше Сообщение:</label></div>
        <textarea type="text" required name="mailMessage" [(ngModel)]="newLetter.message"  class="input-field message-field"></textarea></div>
        
       
        <div [hidden]="captcha">
            <re-captcha (resolved)="resolved($event)" siteKey="6LdIDCogAAAAADhDD0vrfhFn_7nsoO3-qSJZo_kG"></re-captcha>
            <div class="my-button"><button disabled>Отправить письмо!</button></div>
        </div>
        <div [hidden]="!captcha"><div class="my-button"><button onclick="viewDiv()" [disabled]="form.invalid"  name="button" style="text-align:center">Отправить письмо!</button></div></div>
        
      </form>
    </div>
    <div class="stats">
    <div class="form">
      <div class="">
        <div class="row">
          <div style="width: 20%">
            <div>
              <h5>Имя</h5>
            </div>
          </div>
          <div style="width: 20%">
            <div>
              <h5>Почта</h5>
            </div>
          </div>
          <div  style="width: 20%">
            <div>
              <h5>Телефон</h5>
            </div>
          </div>
          <div style="width: 20%">
            <div>
              <h5>Тема</h5>
            </div>
          </div>
          <div style="width: 20%">
            <div>
              <h5>Сообщение</h5>
            </div>
          </div>
        </div> 
    
        <div *ngFor="let letter of letters">
          <div id="div1">
          <div class="row">
            <div style="width: 20%">
              <div *ngFor="let user of users">
                <div *ngIf="user.id == letter.idUser"> {{user.name}}</div>
              </div>
            </div>
            <div style="width: 20%">
              <div *ngFor="let user of users">
                <div *ngIf="user.id == letter.idUser"> {{user.email}}</div>
              </div>
            </div>
            <div  style="width: 20%">
              <div>
                <div *ngFor="let user of users">
                  <div *ngIf="user.id == letter.idUser"> {{user.phone}}</div>
                </div>
              </div>
            </div>
            <div style="width: 20%">
              <div *ngFor="let topic of topics">
                <div *ngIf="topic.id == letter.topic"> {{topic.topic}}</div>
              </div>
            </div>
            <div style="width: 20%">
              <div>
                {{ letter.message }}
              </div>
            </div>
          </div> 
        </div>
      </div>
    </div>
  </div>


